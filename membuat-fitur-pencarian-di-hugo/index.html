<!doctype html><html><head><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2408628281705149" crossorigin=anonymous></script><link rel=icon href=https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg><script data-ad-client=ca-pub-2408628281705149 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-0EVHX122V8"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-0EVHX122V8');</script><script src=/vue.min.js></script><meta property="og:image" content="/undraw_programmer_imem.png"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Membuat Fitur Pencarian Di Hugo - Belajar Pemrograman</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="Membuat Fitur Pencarian Di Hugo"><meta itemprop=description content="Fitur pencarian di HTML statis"><meta itemprop=datePublished content="2020-12-09T21:52:15+00:00"><meta itemprop=dateModified content="2020-12-09T21:52:15+00:00"><meta itemprop=wordCount content="1112"><meta itemprop=keywords content="hugo,"><meta property="og:title" content="Membuat Fitur Pencarian Di Hugo"><meta property="og:description" content="Fitur pencarian di HTML statis"><meta property="og:type" content="article"><meta property="og:url" content="https://belajarpemrograman.my.id/membuat-fitur-pencarian-di-hugo/"><meta property="article:published_time" content="2020-12-09T21:52:15+00:00"><meta property="article:modified_time" content="2020-12-09T21:52:15+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Membuat Fitur Pencarian Di Hugo"><meta name=twitter:description content="Fitur pencarian di HTML statis"><link href="https://fonts.googleapis.com/css?family=Playfair+Display:700" rel=stylesheet type=text/css><link rel=stylesheet type=text/css media=screen href=https://belajarpemrograman.my.id/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://belajarpemrograman.my.id/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=https://belajarpemrograman.my.id/css/dark.css><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src=https://belajarpemrograman.my.id/js/main.js></script><script src=/turbolinks.js></script></head><body><div class="container wrapper"><div class=header><div class=avatar><a href=https://belajarpemrograman.my.id/><img src=https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg alt="Belajar Pemrograman"></a></div><h1 class=site-title><a href=https://belajarpemrograman.my.id/>&lt;BP/></a></h1><div class=site-description><p>Lorem ipsum dolor sit amet</p><nav class="nav social"><ul class=flat><li><a href=https://github.com/mzaini30/belajar-pemrograman title=Github><i data-feather=github></i></a></li><li><a href=/index.xml title=RSS><i data-feather=rss></i></a></li></ul></nav><span class=scheme-toggle><a href=# id=scheme-toggle></a></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tentang-penulis>About</a></li><li><a href=/tags>Tags</a></li><li><a href=/cari>Cari</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>09</span>
<span class=rest>Dec 2020</span></div></div><div class=matter><h1 class=title>Membuat Fitur Pencarian Di Hugo</h1></div></div><div class=markdown><p>Menu pencarian di suatu blog adalah fitur yang sangat penting. Karena, fitur pencarian akan membuat pengunjung akan betah di blog kita, nggak lari ke mana-mana. Soalnya kan kalau bisa dicari di blog ini, buat apa dicari di tempat lain kan ya? Apalagi kalau blog kita itu laju, nggak pakai loading. Bisa karena kita menerapkan Single Page Application atau menggunakan Turbolinks untuk Multiple Page Application seperti di blog ini.</p><p>Nah, sekarang kita akan membuat fitur pencarian di Hugo. Hugo adalah salah satu Static Site Generator yang cukup terkenal selain Jekyll. Yang membuat Hugo terkenal adalah karena dibuat dengan bahasa pemrograman Go yang laju sehingga compile halaman Markdown menjadi HTML pun lebih cepat. Juga, Hugo mendukung Fast Render yang mirip kayak Hot Module Reload di bundler. Sehingga, tidak perlu meng-compile semua halaman untuk mendapatkan update HTML dari Markdown yang sedang kita edit. Jadi, cuma file-file tertentu saja yang di-update di sisi server Hugo.</p><h2 id=logika-program>Logika Program</h2><p>Logika dalam membuat fitur pencarian ini adalah seperti ini:</p><ol><li>Kumpulkan semua postingan (judul, isi, link) dalam satu file JSON (situs.com/posts/index.json)</li><li>Buat satu halaman untuk pencarian (situs.com/cari)</li><li>Di halaman pencarian itu, kita buat program untuk mendapatkan file JSON lalu mecocokkannya sesuai dengan kata kunci yang kita cari</li></ol><p>Sekarang kita mulai buat programnya.</p><h2 id=mulai-coding>Mulai Coding</h2><p>Pertama, kita setting dulu di <code>config.toml</code> untuk mengaktifkan templating di JSON:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>[outputs]
  section = [<span style=color:#a31515>&#34;html&#34;</span>, <span style=color:#a31515>&#34;rss&#34;</span>, <span style=color:#a31515>&#34;json&#34;</span>]
</code></pre></div><p>Kemudian, kita buat template JSON di <code>layouts/_default/list.json.json</code> yang isinya:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tpl data-lang=tpl>[
    <span style=color:#00f>{{</span> range $index, $e := .Data.Pages <span style=color:#00f>}}</span>
     <span style=color:#00f>{{</span> if $index <span style=color:#00f>}}</span>, <span style=color:#00f>{{</span> end <span style=color:#00f>}}</span>
     <span style=color:#00f>{</span>
        <span style=color:#a31515>&#34;judul&#34;</span>: <span style=color:#00f>{{</span> .Title | jsonify <span style=color:#00f>}}</span>,
        <span style=color:#a31515>&#34;isi&#34;</span>: <span style=color:#00f>{{</span> .Plain | jsonify <span style=color:#00f>}}</span>,
        <span style=color:#a31515>&#34;link&#34;</span> : <span style=color:#00f>{{</span> .Permalink | jsonify <span style=color:#00f>}}</span>
     <span style=color:#00f>}</span>
    <span style=color:#00f>{{</span> end <span style=color:#00f>}}</span>
]
</code></pre></div><p>Jadinya:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>[
    
     
     {
        &#34;judul&#34;: <span style=color:#a31515>&#34;Cari&#34;</span>,
        &#34;isi&#34;: <span style=color:#a31515>&#34;  .cari { width: 100%; padding: .5rem; box-sizing: border-box; }    Halo Halo Halo --    document.querySelector(\&#34;.formCari\&#34;).addEventListener(\&#34;submit\&#34;, (x) = { x.preventDefault() async function mulaiCari(){ let hasil = await fetch(&#39;/posts/index.json&#39;).then(x = x.json()) hasil = await hasil let yangDicari = document.querySelector(&#39;.cari&#39;).value.toLowerCase() hasil.map(x = { x.judulKecil = x.judul.toLowerCase() x.isiKecil = x.isi.toLowerCase() }) hasil = hasil.sort((x, y) = x.judul  y.judul) let ketemu = [] for (let y of hasil){ if (y.judulKecil.includes(yangDicari) || y.isiKecil.includes(yangDicari)) { ketemu = [...ketemu, y] } } if (ketemu.length  0) { document.querySelector(&#39;.hasil ol&#39;).innerHTML = ketemu.map(x = `${x.judul}`).join(&#39;&#39;) } else { document.querySelector(&#39;.hasil ol&#39;).innerHTML = ` Nggak Ketemu ` } } mulaiCari() })  &#34;</span>,
        &#34;link&#34; : <span style=color:#a31515>&#34;http://localhost:1313/cari/&#34;</span>
     }
    
     , 
     {
        &#34;judul&#34;: <span style=color:#a31515>&#34;Mengapa Perlu Membuat Blog Khusus Pemrograman&#34;</span>,
        &#34;isi&#34;: <span style=color:#a31515>&#34;&#34;</span>,
        &#34;link&#34; : <span style=color:#a31515>&#34;http://localhost:1313/mengapa-perlu-membuat-blog-khusus-pemrograman/&#34;</span>
     }
    
     , 
     {
        &#34;judul&#34;: <span style=color:#a31515>&#34;Tentang Penulis&#34;</span>,
        &#34;isi&#34;: <span style=color:#a31515>&#34;Penulis blog ini adalah Zen yang merupakan seorang mahasiswa Psikologi angkatan 2015 di Universitas Mulawarman. Dan lulus pada tahun 2020 dengan nilai lumayan lah walaupun nggak bisa sempurna. Soalnya menurutku, nilai yang baik itu harus yang sempurna, tanpa satupun kesalahan.\nBlog ini aku dedikasikan untuk membagikan pengetahuan seputar pemrograman, mulai dari yang paling sederhana hingga yang tingkat rumit. Jadi, aku nggak khusus membahas yang sederhana semua atau yang rumit semua. Ya tergantung mood lah pengen nulis tentang apa.\nDarimana aku belajar tentang pemrograman? Diawali dari kesukaanku akan segala hal yang berbau hacking pada waktu SMP, juga karena diajari cara membuat blog di Blogspot oleh Ustadz Reza. Maka, aku pun mulai tertarik dengan dunia pemrograman. Waktu itu aku sering beli buku-buku Jasakom, terutama yang ngoprek Windows dan tentang jaringan. Dua topik itu sekarang sudah jarang banget sih aku gali karena aku sekarang pakai Linux dan nggak main tentang jaringan lagi.\n&#34;</span>,
        &#34;link&#34; : <span style=color:#a31515>&#34;http://localhost:1313/tentang-penulis/&#34;</span>
     }
    
     , 
     {
        &#34;judul&#34;: <span style=color:#a31515>&#34;Sikap Yang Sebaiknya Dimiliki Programmer&#34;</span>,
        &#34;isi&#34;: <span style=color:#a31515>&#34;Pantang Menyerah Nggak Mudah Mengeluh Tetap Diam Selalu Update Pengetahuan &#34;</span>,
        &#34;link&#34; : <span style=color:#a31515>&#34;http://localhost:1313/sikap-yang-sebaiknya-dimiliki-programmer/&#34;</span>
     }
    
]
</code></pre></div><p>Kemudian kita buat shortcode supaya bisa menyisipkan HTML di dalam postingan. Nah, tuliskan kode berikut di <code>layouts/shortcodes/html.html</code>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tpl data-lang=tpl><span style=color:#00f>{{</span> .Inner <span style=color:#00f>}}</span>
</code></pre></div><p>Baru kita buat postingan baru dengan perintah:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hugo new posts/cari.md
</code></pre></div><p>Maka akan terbentuk <code>content/posts/cari.md</code>. Nah, kemudian kita edit dan diisi dengan:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>---
title: &#34;Cari&#34;
date: 2020-12-09T09:38:59Z
draft: false
description: Cari apa? 
tags:
  - 
---

{{&lt;html&gt;}}
 &lt;style&gt;
  .<span style=color:#2b91af>cari</span> {
   <span style=color:#00f>width</span>: 100<span style=color:#2b91af>%</span>;
   <span style=color:#00f>padding</span>: .5<span style=color:#2b91af>rem</span>;
   <span style=color:#00f>box-sizing</span>: <span style=color:#00f>border-box</span>;
  }
 &lt;/style&gt;
 &lt;form class=<span style=color:#a31515>&#34;formCari&#34;</span>&gt;
  &lt;input class=<span style=color:#a31515>&#34;cari&#34;</span> placeholder=<span style=color:#a31515>&#34;Cari apa?&#34;</span> required&gt;
 &lt;/form&gt;
 &lt;div class=<span style=color:#a31515>&#34;hasil&#34;</span>&gt;
  &lt;ol&gt;
   <span style=color:green>&lt;!--
</span><span style=color:green>   &lt;li&gt;&lt;a href=&#34;/&#34;&gt;Halo&lt;/a&gt;&lt;/li&gt;
</span><span style=color:green>   &lt;li&gt;&lt;a href=&#34;/&#34;&gt;Halo&lt;/a&gt;&lt;/li&gt;
</span><span style=color:green>   &lt;li&gt;&lt;a href=&#34;/&#34;&gt;Halo&lt;/a&gt;&lt;/li&gt;
</span><span style=color:green>   --&gt;</span>
  &lt;/ol&gt;
 &lt;/div&gt;
 &lt;script&gt;
  document.querySelector(<span style=color:#a31515>&#34;.formCari&#34;</span>).addEventListener(<span style=color:#a31515>&#34;submit&#34;</span>, (x) =&gt; {
   x.preventDefault()
   async <span style=color:#00f>function</span> mulaiCari(){
    <span style=color:#00f>let</span> hasil = await fetch(<span style=color:#a31515>&#39;/posts/index.json&#39;</span>).then(x =&gt; x.json())
    hasil = await hasil
    <span style=color:#00f>let</span> yangDicari = document.querySelector(<span style=color:#a31515>&#39;.cari&#39;</span>).value.toLowerCase()
    hasil.map(x =&gt; {
      x.judulKecil = x.judul.toLowerCase()
      x.isiKecil = x.isi.toLowerCase()
    })
    hasil = hasil.sort((x, y) =&gt; x.judul &gt; y.judul)
    <span style=color:#00f>let</span> ketemu = []
    <span style=color:#00f>for</span> (<span style=color:#00f>let</span> y <span style=color:#00f>of</span> hasil){
      <span style=color:#00f>if</span> (y.judulKecil.includes(yangDicari) || y.isiKecil.includes(yangDicari)) {
        ketemu = [...ketemu, y]
      }
    }
    <span style=color:#00f>if</span> (ketemu.length &gt; 0) {
      document.querySelector(<span style=color:#a31515>&#39;.hasil ol&#39;</span>).innerHTML = ketemu.map(x =&gt; <span style=color:#a31515>`&lt;li&gt;&lt;a href=&#39;</span><span style=color:#a31515>${</span>x.link<span style=color:#a31515>}</span><span style=color:#a31515>&#39;&gt;</span><span style=color:#a31515>${</span>x.judul<span style=color:#a31515>}</span><span style=color:#a31515>&lt;/a&gt;&lt;/li&gt;`</span>).join(<span style=color:#a31515>&#39;&#39;</span>)
    } <span style=color:#00f>else</span> {
      document.querySelector(<span style=color:#a31515>&#39;.hasil ol&#39;</span>).innerHTML = <span style=color:#a31515>`
</span><span style=color:#a31515>        &lt;li&gt;&lt;a href=&#39;/cari&#39;&gt;Nggak Ketemu&lt;/a&gt;&lt;/li&gt;
</span><span style=color:#a31515>      `</span>
    }
   }
   mulaiCari()
  })
 &lt;/script&gt;
{{&lt;/html&gt;}}
</code></pre></div><p>Pada script di atas, aku menggunakan sedikit teknik JavaScript untuk mempermudah aku mengaplikasikan logika yang telah kususun sebelumnya. Di situ, aku nggak menggunakan framework JavaScript seperti Vue dan Angular JS, library JavaScript seperti React dan Alpine JS, juga nggak menggunakan compiler JavaScript seperti Svelte.</p><p>Kenapa sih aku mesti repot-repot menggunakan Vanilla JS dibandingkan menggunakan framework JavaScript yang sudah terkenal? Ya karena mau sederhana aja sih. Nggak ribet-ribet fungsinya. Cuma untuk mendapatkan data JSON, mengolahnya, lalu menampilkannya. Nah, sekarang coba deh kita bahas.</p><h2 id=pembahasan-program>Pembahasan Program</h2><p>Pertama, aku menggunakan <code>addEventListener</code> untuk mendapatkan event submit dari form. Kenapa sih aku nggak menggunakan attribute <code>onsubmit</code>? Karena aku ingin menghadirkan <code>preventDefault</code> yang nggak bisa jalan kalau di <code>onsubmit</code>.</p><p>Nah, kodenya itu seperti ini plus dengan <code>preventDefault</code>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>document.querySelector(<span style=color:#a31515>&#34;.formCari&#34;</span>).addEventListener(<span style=color:#a31515>&#34;submit&#34;</span>, (x) =&gt; {
 x.preventDefault()
})
</code></pre></div><p>Lalu, aku menggunakan async/await untuk melakukan <code>fetch</code> ke file JSON yang telah kita buat tadi. Secara umum, teknik async/await untuk <code>fetch</code> itu seperti ini:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>async <span style=color:#00f>function</span> jalankanFetch(){
  <span style=color:#00f>let</span> datanya = await fetch(<span style=color:#a31515>&#39;http://situs.com/data.json&#39;</span>).then(x =&gt; x.json())
  datanya = await datanya
  console.log(datanya)
}
jalankanFetch()
</code></pre></div><p>Logika fetch dengan async/await tampak pada kode bagian ini:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>async <span style=color:#00f>function</span> mulaiCari(){
    <span style=color:#00f>let</span> hasil = await fetch(<span style=color:#a31515>&#39;/posts/index.json&#39;</span>).then(x =&gt; x.json())
    hasil = await hasil
    <span style=color:green>// dst
</span><span style=color:green></span>}
mulaiCari()
</code></pre></div><p>Maka, hasil dari <code>/posts/index.json</code> disimpan pada variabel <code>hasil</code>.</p><p>Lalu, kita buat variabel <code>yangDicari</code> yang isinya adalah kata kunci yang kita cari, lalu dikecilkan hurufnya (lowercase):</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#00f>let</span> yangDicari = document.querySelector(<span style=color:#a31515>&#39;.cari&#39;</span>).value.toLowerCase()
</code></pre></div><p>Terus, yang <code>hasil</code> tadi, kita buat key baru bernama <code>judulKecil</code> yang merupakan nilai dari key <code>judul</code> yang dikecilkan. Dan juga, kita membuat key <code>isiKecil</code> yang merupakan nilai dari <code>isi</code> yang dikecilkan. Lalu, semua nilai dari <code>hasil</code>, kita urutkan berdasarkan key <code>judul</code>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>hasil.map(x =&gt; {
  x.judulKecil = x.judul.toLowerCase()
  x.isiKecil = x.isi.toLowerCase()
})
hasil = hasil.sort((x, y) =&gt; x.judul &gt; y.judul)
</code></pre></div><p>Kemudian, kita buat variabel <code>ketemu</code> yang akan menampung semua nilai yang cocok dengan kata kunci:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#00f>let</span> ketemu = []
</code></pre></div><p>Lalu, kita cocok-cocokkan deh. Kalau sesuai, masukkan ke array <code>ketemu</code>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#00f>for</span> (<span style=color:#00f>let</span> y <span style=color:#00f>of</span> hasil){
  <span style=color:#00f>if</span> (y.judulKecil.includes(yangDicari) || y.isiKecil.includes(yangDicari)) {
    ketemu = [...ketemu, y]
  }
}
</code></pre></div><p>Kemudian, kita tampilkan hasilnya:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#00f>if</span> (ketemu.length &gt; 0) {
  document.querySelector(<span style=color:#a31515>&#39;.hasil ol&#39;</span>).innerHTML = ketemu.map(x =&gt; <span style=color:#a31515>`&lt;li&gt;&lt;a href=&#39;</span><span style=color:#a31515>${</span>x.link<span style=color:#a31515>}</span><span style=color:#a31515>&#39;&gt;</span><span style=color:#a31515>${</span>x.judul<span style=color:#a31515>}</span><span style=color:#a31515>&lt;/a&gt;&lt;/li&gt;`</span>).join(<span style=color:#a31515>&#39;&#39;</span>)
} <span style=color:#00f>else</span> {
  document.querySelector(<span style=color:#a31515>&#39;.hasil ol&#39;</span>).innerHTML = <span style=color:#a31515>`
</span><span style=color:#a31515>    &lt;li&gt;&lt;a href=&#39;/cari&#39;&gt;Nggak Ketemu&lt;/a&gt;&lt;/li&gt;
</span><span style=color:#a31515>  `</span>
}
</code></pre></div></div><div class=tags><ul class=flat><li><a href=/tags/hugo>hugo</a></li></ul></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='belajarpemrogramanzen';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class="footer wrapper"><nav class=nav><div>2021 © Copyright notice | <a href=https://github.com/knadh/hugo-ink>Ink</a> theme on <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script></body></html>