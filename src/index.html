{% extends './layouts/default.html' %}
{% from './components/meta.html' import meta %}

{% block head %}
	{$ meta('Main Kode', 'Yuk main kode') $}
{% endblock %}


{% block body %}
	<section class="wadah-post index">
		<section class="isi-post">
			<header><h1>Main Kode</h1></header>

			<nav class="terbaru">
				<section class="tulisan-terbaru">Terbaru</section> 
				<section class="link-terbaru">
					<a :href="'/post/' + data.slug + '.html'" v-cloak>{{data.judul}}</a>
				</section>
				<script type="module">
					import data from '/data/post.js'

					PetiteVue.createApp({
						data: data.reverse()[0]
					}).mount('.link-terbaru a')
				</script>
			</nav>

			<section class="tengah">

				<nav class="kategorisasi" v-cloak v-for='x in kategorisasiData'>
					<h2>Main {{x.kelas}}</h2>
					<ol>
						<li v-for='y in acak(x.postingan).slice(0, 3)'><a :href="'/post/' + y.slug + '.html'">{{y.judul}}</a></li>
					</ol>
				</nav>

				<script type='module'>
					import data from '/data/post.js'
					import acak from '/acak.js'

					PetiteVue.createApp({
						data,
						acak(x){
							return acak(x)
						},
						get kategorisasiData(){
							let semuaKelas = []
							for (let x of this.data){
								if (!semuaKelas.includes(x.kelas)) {
									semuaKelas = [...semuaKelas, x.kelas]
								}
							}
							semuaKelas.sort()

							let kategorisasi = []
							for (let x of semuaKelas){
								kategorisasi = [...kategorisasi, {
									kelas: x,
									postingan: []
								}]
							}

							for (let x of this.data){
								for (let y of kategorisasi){
									if (x.kelas == y.kelas) {
										y.postingan = [...y.postingan, {
											judul: x.judul,
											slug: x.slug
										}]
									}
								}
							}
							return kategorisasi
						}
					}).mount('.kategorisasi')
				</script>

			</section>

			{% include './imports/footer.html' %}

		</section>
	</section>

	
{% endblock %}