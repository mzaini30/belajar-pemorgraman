{% extends '../layouts/post.html' %}

{% block judul %}
	Fullstack Tanpa Backend dengan Excalibur
{% endblock %}

{% block kelas %}
	JavaScript
{% endblock %}

{% block isi %}
	@markdown
		Apa itu fullstack? Fullstack adalah gabungan dari berbagai kerjaan dijadikan satu. Itu sih namanya superman ya. Hehehehe... Kan, kalau di dunia pemrograman website, kita mengenal beberapa pembagian pekerjaan. Kalau yang paling besar pembagiannya sih frontend dan backend. Frontend itu mengurusi HTML, CSS, [JS](/post/berbagai-modul-javascript-yang-bermanfaat.html). Sedangkan, backend itu mengurusi server.

		Itu sih.

		Kalau lebih detail lagi, ada frontend, backend, UI, UX, database expert, devops, [tester](/post/melakukan-testing-behavior-web-dengan-selenia.html), dan pembagian lainnya. Tapi, di sini kita sederhanakan ke dua bagian aja ya: frontend dan backend. Secara garis besar, frontend itu berkaitan dengan interaksinya dengan user. Berarti kan HTML, CSS, JS plus dengan tampilan dan kesan psikologis saat menggunakan website. Lalu, backend berarti berurusan dengan segala hal di server, termasuk database, caching, perawatan server, dan segala macamnya.

		Menjadi fullstack itu berat. Ya karena kita dituntut untuk melakukan banyak hal dengan waktu yang terbatas. Oleh karena itu, muncullah berbagai tools yang memudahkan kita. Kalau untuk orang-orang yang fokus pada frontend, untuk backendnya bisa kita gunakan Firebase dan Supabase.

		Nah, di sini aku membuat tools yang serupa dan menurutku sih lebih mudah. Namanya **Excalibur**.

		![Arthuria Saber](/gambar/cover.jpg)

		Jadi, Excalibur itu kisahnya kan pedang legendarisnya Raja Arthur. Ya kalau versi kawaiinya ya noble phantasmnya Arthuria Saber. Itu kalau di Fate/Series, salah satu noble phantasm terkuat. Nah, dari sinilah aku terinspirasi dan membuat nama yang sama. 

		Aku terinspirasi membuat suatu tools yang sangat powerful dengan melakukan sesuatu yang simpel. Jadi, istilahnya, nggak ribet gitu. Makanya, kuberi nama Excalibur...

		Untuk menggunakannya, kita bisa membuka **excalibur.nasihosting.com**

		Jadi, tampilannya seperti ini:

		![Tampilan beranda Excalibur](https://i.ibb.co/GHcrT60/tampilan-beranda-excalibur.png)

		Nah, seperti itu tampilannya ketika kita membuka excalibur.nasihosting.com. Terus, pertanyaannya adalah: Ini mau diapain ya?

		Hehehehe...

		Jadi, mungkin aku jelaskan sedikit sih teknis tentang cara kerja Excalibur ini.

		Jadi, dengan Excalibur ini, kamu cukup memprogram frontend aja. Entah itu menggunakan React, Vue, Svelte, ataupun HTML statis biasa. Terus, bagaimana dengan backend? Nggak perlu capek-capek mikirin. Jadi, kamu cukup menggunakan Excalibur aja. Biar dia yang nanti mengolah datanya. Kita cukup _paham sintaks SQL_ aja.

		Nah, kuncinya di situ. Sintaks SQL. Kalau belum paham tentang SQL, baiknya sih belajar dulu aja ya.

		## Membuat Database di Excalibur

		Jadi misalnya kita ingin membuat database buku tamu nikahan. Jadi, yang kita perlukan kan ini aja kolomnya:

		- nama
		- alamat

		Itu aja kan? Sekarang, kita coba buat dengan Excalibur. Jadi, kita buka lagi **excalibur.nasihosting.com** lalu pencet menu `Tambah Database`. Maka, akan tampil seperti ini:

		![Menu di Excalibur](https://i.ibb.co/RNNYtWM/menu-di-excalibur.png)

		Nah, di bagian `Masukkan Field`, isi dengan `nama, alamat`:

		![Isi Tambah database](https://i.ibb.co/b5Kz3rN/mulai-isi-tambah-database-di-excalibur.png)

		Lalu pencet `Buat` atau bisa juga dengan menekan `Enter`. Maka, otomatis akan ditampilkan id database kita. **Disimpan ya...**

		![Database di Excalibur yang berhasil dibuat](https://i.ibb.co/4Z6j0f3/database-di-excalibur-berhasil-dibuat.png)

		Kalau di contoh ini, id database yang berhasil dibuat adalah: `55cf49407f5c50d34f7fa8d74ee831ba`

		Setelah kita mendapatkan idnya, sekarang kita olah dengan membuat website sederhana dulu.

		## Menggunakan [Mini SSG Zen](/post/mengenal-mini-ssg-zen.html)

		Sekarang, kita coba buat folder di laptop untuk latihan. Di sini, aku membuat folder bernama `latihan-excalibur`. Untuk namanya, terserah aja sih.

		Setelah membuat foldernya, coba kamu masuk ke lokasi folder itu dengan Terminal atau Command Prompt. Tau kan ya cara masuknya? Gunakan `cd` untuk berganti direktori. Contoh kalau di Windows:

		```bash
		D:
		cd latihan
		cd latihan-excalibur
		```

		Itu kalau lokasinya di `D:\latihan\latihan-excalibur`. Jadi, sesuaikan aja ya...

		Kemudian, buka `D:\latihan\latihan-excalibur` di teks editor kesayanganmu. Kalau aku, menggunakan Sublime, maka aku ketikkan perintah: `subl . -a`. Kalau kamu menggunakan VS Code, perintah untuk membukanya adalah `code .`. Kalau belum punya teks editor, download dulu ya.

		Kemudian, kita init project [Node JS](/post/menggunakan-node-js-dengan-es-module.html) dengan perintah: `npm init -y`. Oh iya, kalau belum punya Node JS, install dulu aja ya...

		Maka, akan terbentuk file `package.json` yang isinya:

		```json
		{
			"name": "latihan-excalibur",
			"version": "1.0.0",
			"description": "",
			"main": "index.js",
			"scripts": {
				"test": "echo \"Error: no test specified\" && exit 1"
			},
			"keywords": [],
			"author": "",
			"license": "ISC"
		}
		```

		Kita ubah menjadi seperti ini:

		```diff
		{
			"name": "latihan-excalibur",
			"version": "1.0.0",
			"description": "",
			"main": "index.js",
			"scripts": {
		!		"dev": "ssg --watch",
		!		"build": "ssg"
			},
			"keywords": [],
			"author": "",
			"license": "ISC"
		}
		```

		Kemudian, kita install `mini-ssg-zen` dengan perintah: `npm i mini-ssg-zen`.

		Lalu, kita buat `dev/layouts/default.html` yang isinya:

		```html
		<!DOCTYPE html>
		<html lang="en">
		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<title>Tamu Undangan</title>
			<link rel="stylesheet" href="/windi.css">
		</head>
		<body>
			@block(body) @endblock
		</body>
		</html>
		```

		Terus, kita buat `dev/pages/index.html` yang berisi:

		```html
		@layout(default)

		@block(body)
			<h1>Hello World</h1>
		@endblock
		```

		Sekarang, kita kembali ke Terminal/Command Prompt dan jalankan `npm run dev`. Maka, untuk sementara, jadinya seperti ini:

		![Tulisan Hello World](https://i.ibb.co/gtcsnK6/tulisan-hello-world.png)

		Jadi, sekarang kita buat mockupnya dulu ya...

		Jadi, sekarang ubah `dev/pages/index.html` menjadi:

		```html
		@layout(default)

		@block(body)
			<main class="tamu">
				<h1>Tamu Undangan</h1>

				<section class="isi">

					<form action="">
						<label for="nama">Nama</label>
						<input type="text" id="nama" required>
						<label for="alamat">Alamat</label>
						<input type="text" id="alamat" required>
						<input type="submit" value="Kirim">
					</form>

					<table>
						<thead>
							<tr>
								<th>Nama</th>
								<th>Alamat</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Zen</td>
								<td>Samarinda</td>
							</tr>
							<tr>
								<td>Zen</td>
								<td>Samarinda</td>
							</tr>
						</tbody>
					</table>

				</section>
			</main>

			<style lang= "windi">
				.tamu {
					@apply p-5 px-[30%]
				}
				.tamu h1 {
					@apply text-center text-2xl pb-5
				}
				.tamu .isi {
					@apply grid grid-cols-2
				}
				.tamu :where(label, [type='text']) {
					@apply block
				}
				.tamu [type='text'] {
					@apply border-gray-300 border focus:(outline-none border-gray-500) py-1 px-2
				}
				.tamu :where(td, th) {
					@apply border border-green-500 p-2 text-center
				}
				.tamu [type='submit'] {
					@apply mt-3 bg-violet-500 px-2 py-1 text-white cursor-pointer
				}
			</style>
		@endblock
		```

		> Ubah `lang= "windi"` menjadi `lang="windi"`

		Maka, sekarang formnya menjadi:

		![Formulir sederhana](https://i.ibb.co/gZDXR7f/formulir.png)

		## Olah SQL di Excalibur

		Sekarang kita kembali ke **excalibur.nasihosting.com**. Sekarang, kita masukkan ID database yang tadi yaitu `55cf49407f5c50d34f7fa8d74ee831ba` di bagian `ID Database` lalu pencet Enter atau klik `Get`.

		Terus, di kolom isian yang besar itu, masukkan sintaks SQL untuk menambahkan data dan mendapatkan data:

		```sql
		ambil
		select * from [db]

		kirim
		insert into [db] (nama, alamat) values ([nama], [alamat])
		```

		![Tambahkan SQL ke Excalibur](https://i.ibb.co/ss8TwX3/tambahkan-sql-ke-excalibur.png)

		Kalau sudah, klik `Update`.

		Jadi, kita sudah membuat dua _kunci_ yaitu `ambil` dan `kirim`. Untuk kunci `kirim`, membutuhkan value dari `nama` dan `alamat`.

		## Menggunakan Petite Vue

		Sekarang kita download Petite Vue. Cara mudahnya adalah buka `https://unpkg.com/petite-vue@0.3.0/dist/petite-vue.iife.js` kemudian pencet `Ctrl` `s`. Nah, disimpannya ke `dev/static/`.

		Kemudian, di `dev/layouts/default.html` kita ubah menjadi seperti ini:

		```diff
		<!DOCTYPE html>
		<html lang="en">
		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<title>Tamu Undangan</title>
			<link rel="stylesheet" href="/windi.css">
		+	<script src="/petite-vue.iife.js"></script>
		</head>
		<body>
			@block(body) @endblock
		</body>
		</html>
		```

		Sekarang, kita buat dulu file `dev/static/excalibur.js` yang berfungsi sebagai helper yang membantu kita saat bermain dengan Excalibur. Isinya itu:

		```javascript
		export default async function(server, data){
			const body = new FormData
			for (let n in data){
				body.append(n, data[n])
			}

			let proses = await fetch(server, {
				method: 'post',
				body
			}, {
				'Content-Type': 'application/x-www-form-urlencoded'
			})
			return proses
		}
		```

		Sekarang, kita buka lagi `dev/pages/index.html` dan kita olah supaya bisa bermain dengan Excalibur. Maka, isinya kita ubah menjadi:

		```diff
		@layout(default)

		@block(body)
		!	<main class="tamu" v-cloak @vue:mounted='ambilData'>
				<h1>Tamu Undangan</h1>

				<section class="isi">

		!			<form action="" @submit.prevent='kirim'>
						<label for="nama">Nama</label>
		!				<input type="text" v-model='nama' id="nama" required>
						<label for="alamat">Alamat</label>
		!				<input type="text" v-model='alamat' id="alamat" required>
						<input type="submit" value="Kirim">
					</form>

					<section>
						<table>
							<thead>
								<tr>
									<th>Nama</th>
									<th>Alamat</th>
								</tr>
							</thead>
							<tbody>
		!						<tr v-for='x in data'>
		!							<td>{{x.nama}}</td>
		!							<td>{{x.alamat}}</td>
								</tr>
							</tbody>
						</table>
					</section>

				</section>
			</main>

		+	<script type="module">
		+		import excalibur from '/excalibur.js'
		+
		+		const id = '55cf49407f5c50d34f7fa8d74ee831ba'
		+		const server = 'https://excalibur.nasihosting.com/sql.php'
		+
		+		PetiteVue.createApp({
		+			nama: '',
		+			alamat: '',
		+			data: [],
		+			async ambilData(){
		+				let datanya = await excalibur(server, {
		+					id,
		+					kunci: 'ambil'
		+				})
		+				datanya = await datanya.json()
		+				this.data = datanya
		+			},
		+			async kirim(){
		+				const kirimData = await excalibur(server, {
		+					id,
		+					kunci: 'kirim',
		+					nama: this.nama,
		+					alamat: this.alamat
		+				})
		+				if (kirimData) {
		+					this.nama = ''
		+					this.alamat = ''
		+					this.ambilData()
		+				}
		+			}
		+		}).mount('.tamu')
		+	</script>

			<style lang= "windi">
		+		[v-cloak] {
		+			@apply hidden
		+		}

				.tamu {
		!			@apply p-5 px-[30%] <sm:px-5
				}
				.tamu h1 {
					@apply text-center text-2xl pb-5
				}
				.tamu .isi {
		!			@apply grid grid-cols-2 <sm:(grid-cols-1 gap-3)
				}
				.tamu :where(label, [type='text']) {
					@apply block
				}
				.tamu [type='text'] {
					@apply border-gray-300 border focus:(outline-none border-gray-500) py-1 px-2
				}
				.tamu :where(td, th) {
					@apply border border-green-500 p-2 text-center
				}
				.tamu [type='submit'] {
					@apply mt-3 bg-violet-500 px-2 py-1 text-white cursor-pointer
				}
			</style>
		@endblock
		```

		> Ubah `lang= "windi"` menjadi `lang="windi"`

		Selesai...

		Hasilnya seperti ini:

		![Formulir buku tamu nikahan](https://i.ibb.co/y8gMkvf/formulir-buku-tamu-nikahan-udah-jadi.png)

		Kode-kode di tutorial ini bisa kamu dapatkan di [mzaini30/contoh-excalibur](https://github.com/mzaini30/contoh-excalibur) dan demo websitenya bisa dilihat di [contoh-excalibur.vercel.app](https://contoh-excalibur.vercel.app/).
	@endmarkdown
{% endblock %}