---
import {ambilKategori} from '../_ambilKategori'
import Layout from '../__layout.astro'
import Meta from 'astro-meta'
import IklanKecil from '../_iklan/kecil.astro'
import IklanKotak from '../_iklan/kotak.astro'

export async function getStaticPaths(){
	const semuaTulisan = await Astro.fetchContent('../post/*.md')
	const kategorinya = ambilKategori(semuaTulisan)
	return kategorinya.map(x => {
		return {
			params: {kategori: x},
			props: {semuaTulisan}
		}
	})
}

const {kategori} = Astro.request.params
const {semuaTulisan} = Astro.props
---

<Layout>
	<Meta title={`Kelas ${kategori}`} description={`Yuk kita belajar ${kategori} dengan giat supaya bisa bermanfaat bagi semesta`} slot='head'></Meta>

	<div slot='body'>
		<div class='header'>
			<a href="/">Belajar Pemrograman</a>
		</div>

		<div class='preview'>
			<div class='gambar' style={`background-image: url('/ikon/${kategori}.jpg')`}></div>
			<div class='setelah-gambar'>
				<h1>{kategori}</h1>
				<h2>Yuk kita belajar {kategori}</h2>
			</div>
		</div>

		<br>
		<IklanKecil></IklanKecil>

		<div class='isi'>
			{semuaTulisan.filter(x => x.kategori == kategori).map(x => <div><a class='card' href={x.url}>
				{x.judul}
			</a></div>)}
		</div>
		<IklanKotak></IklanKotak>
	</div>
</Layout>

<style>
	.preview {
		@apply bg-gradient-60 text-white items-center flex p-10 <md:grid-cols-1;
	}
	.header a {
		@apply p-5 block hover:bg-gray-100 <md:text-center;
	}
	.setelah-gambar {
		@apply <md:hidden;
	}
	h1 {
		@apply text-5xl pb-5;
		/*font-family: 'Comic Sans MS';*/
	}
	h2 {
		@apply pb-10;
	}
	.isi {
		@apply grid grid-cols-4 gap-5 p-5 <md:grid-cols-1;
	}
	.isi .card {
		@apply bg-gradient-2 text-center px-5 py-10 block
	}
	.isi img {
		@apply block transform hover:rotate-6 <md:hover:rotate-0;
		transition: .5s;
	}
	.gambar {
		background-position: 50% 50%;
		background-repeat: no-repeat;
		background-size: cover;
		width: 200px;
		height: 200px;
		@apply rounded-[50%] <md:(block mx-auto) mr-10;
	}
</style>
